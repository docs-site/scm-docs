import{_ as e,c as a,o as r,b0 as s}from"./chunks/framework.C5ev1SXp.js";const d="/scm-docs/assets/ESP-AT-overview.C0FF5Qhw.jpg",o="/scm-docs/assets/image-20240108223813086.BNtTAFQt.png",i="/scm-docs/assets/image-20240109225730589.BL6JuEsC.png",l="/scm-docs/assets/image-20240109235230086.BkNNpQph.png",h="/scm-docs/assets/image-20240111075813405.Cro2f_XQ.png",c="/scm-docs/assets/image-20240109235245573.fXaVW4YM.png",n="/scm-docs/assets/image-20240109235607278.psWAZwt9.png",m="/scm-docs/assets/image-20240109235704161.DhaaBUcf.png",p="/scm-docs/assets/image-20240111075135425.DM4_KoEV.png",A="/scm-docs/assets/image-20240111075222372.D7_Av24n.png",T="/scm-docs/assets/image-20240111075716960.Be0nyZxX.png",_="/scm-docs/assets/image-20240112190444885.DcCHMSwd.png",P="/scm-docs/assets/image-20240112190511186.CAdWgaoZ.png",C="/scm-docs/assets/image-20240112190526692.DGJ-3zSE.png",S="/scm-docs/assets/image-20240112190541015.BiiS6yPl.png",f="/scm-docs/assets/image-20240112190715225.CuSqr1Kl.png",b="/scm-docs/assets/image-20240112190733184.d82MKJBD.png",g="/scm-docs/assets/image-20240112190852071.D7MuXbD0.png",q=JSON.parse('{"title":"LV010-AT指令","description":null,"frontmatter":{"title":"LV010-AT指令","date":"2025-09-27T12:48:07.000Z","icon":"famicons:logo-markdown","permalink":"/sdoc/advanced-chapter/esp8266/126b095151472d621a6605a9","index":true,"tags":null,"categories":null,"copyright":false,"keywords":null,"cover":null,"comments":null,"mathjax":null,"top":null,"description":null,"tdoc":{"detailDate":"2025-09-27T12:48:07.726Z","fulluuid":"21a6605a91b34e7b87e3081f66267021","useduuid":"21a6605a9"}},"headers":[],"relativePath":"sdoc/advanced-chapter/esp8266/126b095151472d621a6605a9.md","filePath":"sdoc/30-进阶篇/02-ESP8266/LV010-AT指令.md","lastUpdated":1758811394000}'),u={name:"sdoc/advanced-chapter/esp8266/126b095151472d621a6605a9.md"};function I(E,t,D,k,W,v){return r(),a("div",null,[...t[0]||(t[0]=[s('<h1 id="lv010-at指令" tabindex="-1">LV010-AT指令 <a class="header-anchor" href="#lv010-at指令" aria-label="Permalink to &quot;LV010-AT指令&quot;">​</a></h1><h2 id="一、essp-at是什么" tabindex="-1">一、ESSP-AT是什么？ <a class="header-anchor" href="#一、essp-at是什么" aria-label="Permalink to &quot;一、ESSP-AT是什么？&quot;">​</a></h2><p>ESP-AT 是乐鑫开发的可直接用于量产的物联网应用固件，旨在降低客户开发成本，快速形成产品。通过 ESP-AT 指令，您可以快速加入无线网络、连接云平台、实现数据通信以及远程控制等功能，真正的通过无线通讯实现万物互联。</p><p>ESP-AT 是基于 ESP-IDF 或 ESP8266_RTOS_SDK 实现的软件工程。它使 ESP 模组作为从机，MCU 作为主机。MCU 发送 AT 命令给 ESP 模组，控制 ESP 模组执行不同的操作，并接收 ESP 模组返回的 AT 响应。ESP-AT 提供了大量功能不同的 AT 命令，如 Wi-Fi 命令、TCP/IP 命令、Bluetooth LE 命令、Bluetooth 命令、MQTT 命令、HTTP 命令、Ethernet 命令等。</p><img src="'+d+'" alt="ESP-AT 概览"><p>AT 命令以 “AT” 开始，代表 Attention，以新的一行 (CR LF) 为结尾。输入的每条命令都会返回 <code>OK</code> 或 <code>ERROR</code> 的响应，表示当前命令的最终执行结果。注意，所有 AT 命令均为串行执行，每次只能执行一条命令。因此，在使用 AT 命令时，应等待上一条命令执行完毕后，再发送下一条命令。如果上一条命令未执行完毕，又发送了新的命令，则会返回 <code>busy p...</code> 提示。更多有关 AT 命令的信息可参见 <a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/index.html" target="_blank" rel="noreferrer">AT 命令集</a>。</p><p>默认配置下，MCU 通过 UART 连接至 ESP 模组、发送 AT 命令以及接收 AT 响应。但是，您也可以根据实际使用情况修改程序，使用其他的通信接口，例如 SDIO。</p><h2 id="二、at-指令格式" tabindex="-1">二、AT 指令格式 <a class="header-anchor" href="#二、at-指令格式" aria-label="Permalink to &quot;二、AT 指令格式&quot;">​</a></h2><p>AT 指令可以细分为四种类型，如下表所示：</p><img src="'+o+'" alt="image-20240108223813086"><p>注意：</p><p>（1）不是每条 AT 指令都具有以上四种指令格式的命令。</p><p>（2）中括号（[ ]）内的参数为缺省值，不必填写或者可能不显示。</p><p>（3）使用双引号表示字符串数据，例如： AT+CWJAP=”ALIENTEK”,”15902020353”。</p><p>（4）ATK-MW8266D 模块的 UART 通讯波特率为 115200bps。</p><p>（5）AT 指令必须大写，且每条指令都需以回车换行符结尾<code>\\r\\n</code>。</p><h2 id="三、at指令说明" tabindex="-1">三、AT指令说明 <a class="header-anchor" href="#三、at指令说明" aria-label="Permalink to &quot;三、AT指令说明&quot;">​</a></h2><p>模块默认是 AT 指令状态，模块波特率： 115200（8 位数据位， 1 位停止位），这里我们看一下几个用户常用指令，详细的指令集可以参《ESP8266_AT 指令集 V2.1.0.pdf》这个文档。 我们其实可以直接去乐鑫或者安信可官网查阅，例如乐鑫官网的<a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/index.html#at" target="_blank" rel="noreferrer">AT 命令集</a>。</p><h3 id="_1-基础at指令" tabindex="-1">1. 基础AT指令 <a class="header-anchor" href="#_1-基础at指令" aria-label="Permalink to &quot;1. 基础AT指令&quot;">​</a></h3><ul><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-at" target="_blank" rel="noreferrer">AT</a>：测试 AT 启动</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-rst" target="_blank" rel="noreferrer">AT+RST</a>：重启模块</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-gmr" target="_blank" rel="noreferrer">AT+GMR</a>：查看版本信息</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-cmd" target="_blank" rel="noreferrer">AT+CMD</a>：查询当前固件支持的所有命令及命令类型</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-ate" target="_blank" rel="noreferrer">ATE</a>：开启或关闭 AT 回显功能</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-restore" target="_blank" rel="noreferrer">AT+RESTORE</a>：恢复出厂设置</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-uartc" target="_blank" rel="noreferrer">AT+UART_CUR</a>：设置 UART 当前临时配置，不保存到 flash</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-uartd" target="_blank" rel="noreferrer">AT+UART_DEF</a>：设置 UART 默认配置, 保存到 flash</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-sysstore" target="_blank" rel="noreferrer">AT+SYSSTORE</a>：设置参数存储模式</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Basic_AT_Commands.html#cmd-sysreg" target="_blank" rel="noreferrer">AT+SYSREG</a>：读写寄存器</li></ul><h3 id="_2-wifi功能at指令" tabindex="-1">2. WiFi功能AT指令 <a class="header-anchor" href="#_2-wifi功能at指令" aria-label="Permalink to &quot;2. WiFi功能AT指令&quot;">​</a></h3><ul><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-mode" target="_blank" rel="noreferrer">AT+CWMODE</a>：查询/设置 Wi-Fi 模式 (Station/SoftAP/Station+SoftAP)</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-jap" target="_blank" rel="noreferrer">AT+CWJAP</a>：连接 AP</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-lap" target="_blank" rel="noreferrer">AT+CWLAP</a>：扫描当前可用的 AP</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-qap" target="_blank" rel="noreferrer">AT+CWQAP</a>：断开与 AP 的连接</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-sap" target="_blank" rel="noreferrer">AT+CWSAP</a>：配置 ESP32 SoftAP 参数</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-lif" target="_blank" rel="noreferrer">AT+CWLIF</a>：查询连接到 ESP SoftAP 的 station 信息</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-qif" target="_blank" rel="noreferrer">AT+CWQIF</a>：断开 station 与 ESP SoftAP 的连接</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-autoc" target="_blank" rel="noreferrer">AT+CWAUTOCONN</a>：上电是否自动连接 AP</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-stamac" target="_blank" rel="noreferrer">AT+CIPSTAMAC</a>：查询/设置 ESP Station 的 MAC 地址</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-apmac" target="_blank" rel="noreferrer">AT+CIPAPMAC</a>：查询/设置 ESP SoftAP 的 MAC 地址</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-ipsta" target="_blank" rel="noreferrer">AT+CIPSTA</a>：查询/设置 ESP Station 的 IP 地址</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-ipap" target="_blank" rel="noreferrer">AT+CIPAP</a>：查询/设置 ESP SoftAP 的 IP 地址</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-starts" target="_blank" rel="noreferrer">AT+CWSTARTSMART</a>：开启 SmartConfig</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-stops" target="_blank" rel="noreferrer">AT+CWSTOPSMART</a>：停止 SmartConfig</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-wps" target="_blank" rel="noreferrer">AT+WPS</a>：设置 WPS 功能</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-mdns" target="_blank" rel="noreferrer">AT+MDNS</a>：设置 mDNS 功能</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/Wi-Fi_AT_Commands.html#cmd-hostname" target="_blank" rel="noreferrer">AT+CWHOSTNAME</a>：查询/设置 ESP Station 的主机名称</li></ul><h3 id="_3-tcp-ip相关at指令" tabindex="-1">3. TCP/IP相关AT指令 <a class="header-anchor" href="#_3-tcp-ip相关at指令" aria-label="Permalink to &quot;3. TCP/IP相关AT指令&quot;">​</a></h3><ul><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-status" target="_blank" rel="noreferrer">AT+CIPSTATUS</a>：查询 TCP/UDP/SSL 连接状态和信息</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-domain" target="_blank" rel="noreferrer">AT+CIPDOMAIN</a>：域名解析</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-start" target="_blank" rel="noreferrer">AT+CIPSTART</a>：建立 TCP 连接、UDP 传输或 SSL 连接</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-startex" target="_blank" rel="noreferrer">AT+CIPSTARTEX</a>：建立自动分配 ID 的 TCP 连接、UDP 传输或 SSL 连接</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-send" target="_blank" rel="noreferrer">AT+CIPSEND</a>：在 <a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/index_of_abbreviations.html#term-0" target="_blank" rel="noreferrer">普通传输模式</a> 或 Wi-Fi <a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/index_of_abbreviations.html#term-1" target="_blank" rel="noreferrer">透传模式</a> 下发送数据</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-sendex" target="_blank" rel="noreferrer">AT+CIPSENDEX</a>：在 <a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/index_of_abbreviations.html#term-0" target="_blank" rel="noreferrer">普通传输模式</a> 下采用扩展的方式发送数据</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-close" target="_blank" rel="noreferrer">AT+CIPCLOSE</a>：关闭 TCP/UDP/SSL 连接</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-ifsr" target="_blank" rel="noreferrer">AT+CIFSR</a>：查询本地 IP 地址和 MAC 地址</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-mux" target="_blank" rel="noreferrer">AT+CIPMUX</a>：启用/禁用多连接模式</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-server" target="_blank" rel="noreferrer">AT+CIPSERVER</a>：建立/关闭 TCP 或 SSL 服务器</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-ipmode" target="_blank" rel="noreferrer">AT+CIPMODE</a>：查询/设置传输模式</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-savet" target="_blank" rel="noreferrer">AT+SAVETRANSLINK</a>：设置开机 <a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/index_of_abbreviations.html#term-1" target="_blank" rel="noreferrer">透传模式</a> 信息</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-sto" target="_blank" rel="noreferrer">AT+CIPSTO</a>：查询/设置本地 TCP 服务器超时时间</li><li><a href="https://espressif-docs.readthedocs-hosted.com/projects/esp-at/zh-cn/release-v2.2.0.0_esp8266/AT_Command_Set/TCP-IP_AT_Commands.html#cmd-cipping" target="_blank" rel="noreferrer">AT+PING</a>：ping 对端主机</li></ul><h2 id="四、常用at指令实例" tabindex="-1">四、常用AT指令实例 <a class="header-anchor" href="#四、常用at指令实例" aria-label="Permalink to &quot;四、常用AT指令实例&quot;">​</a></h2><h3 id="_1-ap-模式下作-tcp-服务器" tabindex="-1">1. AP 模式下作 TCP 服务器 <a class="header-anchor" href="#_1-ap-模式下作-tcp-服务器" aria-label="Permalink to &quot;1. AP 模式下作 TCP 服务器&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=2</td><td>设置为 AP 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWSAP=”ATK-MW8266D”, ”12345678”,1,4</td><td>设置 AP 参数。 SSID 为 ATK-MW8266D、密码为 12345678、 通道为 1、加密方式为 WPA_WPA2_PSK</td></tr><tr><td>AT+CIPMUX=1</td><td>开启多连接</td></tr><tr><td>AT+CIPSERVER=1,8086</td><td>开启 SERVER 模式，端口号为 8086</td></tr><tr><td>AT+CIPSEND=0,25</td><td>向 ID0 发送 25 字节数据包</td></tr></tbody></table><h3 id="_2-ap-模式下作-tcp-客户端" tabindex="-1">2. AP 模式下作 TCP 客户端 <a class="header-anchor" href="#_2-ap-模式下作-tcp-客户端" aria-label="Permalink to &quot;2. AP 模式下作 TCP 客户端&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=2</td><td>设置为 AP 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWSAP=”ATK-MW8266D”,”12345678”,1,4</td><td>设置 AP 参数。 SSID 为 ATK-MW8266D、密码为 12345678、通道为 1、加密方式为 WPA_WPA2_PSK</td></tr><tr><td>AT+CIPMUX=0</td><td>开启单连接</td></tr><tr><td>AT+CIPSTART=”TCP”, ”192.168.4.XXX”,8086</td><td>建立 TCP 连接到 192.168.4.XXX:8086</td></tr><tr><td>AT+CIPMODE=1</td><td>开启透传模式（仅单连接 Client 时支持）</td></tr><tr><td>AT+CIPSEND</td><td>开始发送数据</td></tr></tbody></table><h3 id="_3-ap-模式下-udp-连接" tabindex="-1">3. AP 模式下 UDP 连接 <a class="header-anchor" href="#_3-ap-模式下-udp-连接" aria-label="Permalink to &quot;3. AP 模式下 UDP 连接&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=2</td><td>设置为 AP 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWSAP=”ATK-MW8266D”, ”12345678”,1,4</td><td>设置 AP 参数。 SSID 为 ATK-MW8266D、密码为 12345678、 通道为 1、加密方式为 WPA_WPA2_PSK</td></tr><tr><td>AT+CIPMUX=0</td><td>开启单连接</td></tr><tr><td>AT+CIPSTART=”UDP”, “192.168.4.XXX”,8086</td><td>建立 UDP 连接到 192.168.4.XXX:8086</td></tr><tr><td>AT+CIPSEND=25</td><td>向目标 UDP 发送 25 字节数据</td></tr></tbody></table><h3 id="_4-sta-模式下作-tcp-服务器" tabindex="-1">4. STA 模式下作 TCP 服务器 <a class="header-anchor" href="#_4-sta-模式下作-tcp-服务器" aria-label="Permalink to &quot;4. STA 模式下作 TCP 服务器&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=1</td><td>设置为 STA 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWJAP=”ATK-MW8266D”, ”12345678”</td><td>加入 WiFi 热点。 SSID： ATK-MW8266D、密码： 12345678</td></tr><tr><td>AT+CIPMUX=1</td><td>开启多连接</td></tr><tr><td>AT+CIPSERVER=1,8086</td><td>开启 SERVER 模式，端口号为 8086</td></tr><tr><td>AT+CIPSEND=0,25</td><td>向 ID0 发送 25 字节数据包</td></tr></tbody></table><h3 id="_5-sta-模式下作-tcp-客户端" tabindex="-1">5. STA 模式下作 TCP 客户端 <a class="header-anchor" href="#_5-sta-模式下作-tcp-客户端" aria-label="Permalink to &quot;5. STA 模式下作 TCP 客户端&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=1</td><td>设置为 STA 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWJAP=”ATK-MW8266D”, ”12345678”</td><td>加入 WiFi 热点。 SSID： ATK-MW8266D、密码： 12345678</td></tr><tr><td>AT+CIPMUX=0</td><td>开启单连接</td></tr><tr><td>AT+CIPSTART=”TCP”, ”192.168.4.XXX”,8086</td><td>建立 TCP 连接到 192.168.4.XXX:8086</td></tr><tr><td>AT+CIPMODE=1</td><td>开启透传模式（仅单连接 Client 时支持）</td></tr><tr><td>AT+CIPSEND</td><td>开始发送数据</td></tr></tbody></table><h3 id="_6-sta-模式下-udp-连接" tabindex="-1">6. STA 模式下 UDP 连接 <a class="header-anchor" href="#_6-sta-模式下-udp-连接" aria-label="Permalink to &quot;6. STA 模式下 UDP 连接&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=1</td><td>设置为 STA 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWJAP=”ATK-MW8266D”, ”12345678”</td><td>加入 WiFi 热点。 SSID： ATK-MW8266D、密码： 12345678</td></tr><tr><td>AT+CIPMUX=0</td><td>开启单连接</td></tr><tr><td>AT+CIPSTART=”UDP”, “192.168.4.XXX”,8086</td><td>建立 UDP 连接到 192.168.4.XXX:8086</td></tr><tr><td>AT+CIPSEND=25</td><td>向目标 UDP 发送 25 字节数据</td></tr></tbody></table><h3 id="_7-ap-sta-模式下作-tcp-服务器" tabindex="-1">7. AP+STA 模式下作 TCP 服务器 <a class="header-anchor" href="#_7-ap-sta-模式下作-tcp-服务器" aria-label="Permalink to &quot;7. AP+STA 模式下作 TCP 服务器&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=3</td><td>设置为 AP+STA 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWSAP=”ATK-MW8266D”, ”12345678”,1,4</td><td>设置 AP 参数。 SSID 为 ATK-MW8266D、密码为 12345678、 通道为 1、加密方式为 WPA_WPA2_PSK</td></tr><tr><td>AT+CWJAP=”ALIENTEK”, ”12345678”</td><td>加入 WiFi 热点。 SSID： ALIENTEK、密码： 12345678</td></tr><tr><td>AT+CIPMUX=1</td><td>开启多连接</td></tr><tr><td>AT+CIPSERVER=1,8086</td><td>开启 SERVER 模式，端口号为 8086</td></tr><tr><td>AT+CIPSTO=1200</td><td>设置服务器超时时间 1200s</td></tr><tr><td>AT+CIPSEND=0,25</td><td>向 ID0 发送数据</td></tr><tr><td>AT+CIPSEND=1,25</td><td>向 ID1 发送数据</td></tr></tbody></table><h3 id="_8-ap-sta-模式下作-tcp-客户端" tabindex="-1">8. AP+STA 模式下作 TCP 客户端 <a class="header-anchor" href="#_8-ap-sta-模式下作-tcp-客户端" aria-label="Permalink to &quot;8. AP+STA 模式下作 TCP 客户端&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=3</td><td>设置为 AP+STA 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWSAP=”ATK-MW8266D”, ”12345678”,1,4</td><td>设置 AP 参数。 SSID 为 ATK-MW8266D、密码为 12345678、 通道为 1、加密方式为 WPA_WPA2_PSK</td></tr><tr><td>AT+CWJAP=”ALIENTEK”, ”12345678”</td><td>加入 WiFi 热点。 SSID： ALIENTEK、密码： 12345678</td></tr><tr><td>AT+CIPMUX=1</td><td>开启多连接</td></tr><tr><td>AT+CIPSTART=0,”TCP”, ”192.168.4.XXX”,8086</td><td>建立 TCP 连接到 192.168.4.XXX:8086</td></tr><tr><td>AT+CIPSEND=0,25</td><td>向 ID0 发送数据</td></tr><tr><td>AT+CIPSEND=1,25</td><td>向 ID1 发送数据</td></tr></tbody></table><h3 id="_9-ap-sta-模式下-udp-连接" tabindex="-1">9. AP+STA 模式下 UDP 连接 <a class="header-anchor" href="#_9-ap-sta-模式下-udp-连接" aria-label="Permalink to &quot;9. AP+STA 模式下 UDP 连接&quot;">​</a></h3><table tabindex="0"><thead><tr><th>发送指令</th><th>作用</th></tr></thead><tbody><tr><td>AT+CWMODE=3</td><td>设置为 AP+STA 模式</td></tr><tr><td>AT+RST</td><td>重启生效</td></tr><tr><td>AT+CWSAP=”ATK-MW8266D”, ”12345678”,1,4</td><td>设置 AP 参数。 SSID 为 ATK-MW8266D、密码为 12345678、 通道为 1、加密方式为 WPA_WPA2_PSK</td></tr><tr><td>AT+CWJAP=”ALIENTEK”,”12345678”</td><td>加入 WiFi 热点。 SSID： ALIENTEK、密码： 12345678</td></tr><tr><td>AT+CIPMUX=1</td><td>开启多连接</td></tr><tr><td>AT+CIPSERVER=1,8086</td><td>开启服务器，端口号 8086</td></tr><tr><td>AT+CIPSTO=1200</td><td>设置服务器超时时间 1200s</td></tr><tr><td>AT+CIPSTART=0,”UDP”, “192.168.1.XXX”,8086</td><td>STA 作为 ID0 连接到 192.168.1.XXX:8086</td></tr><tr><td>AT+CIPSEND=0,25</td><td>向 ID0 发送数据</td></tr><tr><td>AT+CIPSEND=1,25</td><td>向 ID1 发送数据</td></tr></tbody></table><h2 id="五、测试实验" tabindex="-1">五、测试实验 <a class="header-anchor" href="#五、测试实验" aria-label="Permalink to &quot;五、测试实验&quot;">​</a></h2><h3 id="_1-使用前准备" tabindex="-1">1. 使用前准备 <a class="header-anchor" href="#_1-使用前准备" aria-label="Permalink to &quot;1. 使用前准备&quot;">​</a></h3><h4 id="_1-1-所需工具" tabindex="-1">1.1 所需工具 <a class="header-anchor" href="#_1-1-所需工具" aria-label="Permalink to &quot;1.1 所需工具&quot;">​</a></h4><p>（1）ATK-ESP8266 WIFI 模块一个</p><p>（2）USB 转 TTL 模块一个（战舰板板载USB 转 TTL）</p><p>（3）电脑安装 CH340 驱动（USB 转 TTL 模块必须）</p><p>（4）网络调试助手<a href="http://47.111.11.73/docs/tool/ruanjian/ATK-XNET.html" target="_blank" rel="noreferrer">网络调试助手软件(ATK-XNET) 版本：v1.8 — 正点原子资料下载中心 1.0.0 文档</a>，在windows下使用的时候发现无论如何模块都连接不上服务器，所以又找了一个Linux下的，说是在虚拟机中可以正常建立服务器并可以连接mNetAssist（<a href="https://github.com/hecanbo/mNetAssist" target="_blank" rel="noreferrer">hecanbo/mNetAssist: mNetAssist - A UDP/TCP Assistant (github.com)</a>），但是吧，我试了，还是不行，后来觉得没必要在这里浪费时间，写个笔记就算了，后面再说。</p><p>（5）串口调试助手：<a href="http://47.111.11.73/docs/tool/ruanjian/ATK-XCOM.html#" target="_blank" rel="noreferrer">串口调试助手软件(ATK-XCOM) 版本：v3.0 — 正点原子资料下载中心 1.0.0 文档</a></p><h4 id="_1-2-硬件连接" tabindex="-1">1.2 硬件连接 <a class="header-anchor" href="#_1-2-硬件连接" aria-label="Permalink to &quot;1.2 硬件连接&quot;">​</a></h4><img src="'+i+'" alt="image-20240109225730589"><h3 id="_2-tcp-client-透传模式测试" tabindex="-1">2. TCP Client 透传模式测试 <a class="header-anchor" href="#_2-tcp-client-透传模式测试" aria-label="Permalink to &quot;2. TCP Client 透传模式测试&quot;">​</a></h3><h4 id="_2-1-助手配置" tabindex="-1">2.1 助手配置 <a class="header-anchor" href="#_2-1-助手配置" aria-label="Permalink to &quot;2.1 助手配置&quot;">​</a></h4><ul><li>网络助手</li></ul><p>我们下载上面提到的网络调试助手，并且创建一个server，如下图，注意这里的IP一般都是自动识别：</p><img src="'+l+'" alt="image-20240109235230086" style="zoom:80%;"><ul><li>串口调试助手</li></ul><p>主要是配置一下波特率：</p><img src="'+h+'" alt="image-20240111075813405" style="zoom:50%;"><h4 id="_2-2-配置wifi模块" tabindex="-1">2.2 配置WiFi模块 <a class="header-anchor" href="#_2-2-配置wifi模块" aria-label="Permalink to &quot;2.2 配置WiFi模块&quot;">​</a></h4><p>我们在串口调试助手依次输入以下命令：</p><table tabindex="0"><thead><tr><th>步骤</th><th>命令</th><th>响应</th></tr></thead><tbody><tr><td>（1）设置 WIFI 模式</td><td><code>AT+CWMODE=1</code> //设置为 STA 模式</td><td>OK</td></tr><tr><td>（2）重启生效</td><td><code>AT+RST</code></td><td>OK</td></tr><tr><td>（3）连接路由器</td><td><code>AT+CWJAP=”ALIENTEK”,”15902020353”</code> //连接对象路由器的 ssid 和 password</td><td>OK</td></tr><tr><td>（4）查询模块 IP</td><td><code>AT+CIFSR</code></td><td>192.168.1.xxx</td></tr><tr><td>（5）模块连接到 server</td><td><code>AT+CIPSTART=&quot;TCP&quot;,&quot;192.168.19.1&quot;,8080</code></td><td>CONNECT<br>OK</td></tr><tr><td>（6）开启透传模式</td><td><code>AT+CIPMODE=1</code></td><td>OK</td></tr><tr><td>（7） 开始透传</td><td><code>AT+CIPSEND</code></td><td>OK</td></tr><tr><td>（8）退出透传模式</td><td>在透传模式中，若识别到单独的一包数据“ +++”，则退出透传模式。</td><td></td></tr></tbody></table><h4 id="_2-3-实验效果" tabindex="-1">2.3 实验效果 <a class="header-anchor" href="#_2-3-实验效果" aria-label="Permalink to &quot;2.3 实验效果&quot;">​</a></h4><p>这里的图和实际效果是直接用的正点原子文档里的，因为我自己在尝试的时候发现网络调试助手识别到的本机IP地址和WiFi模块连接后获取的IP并不在一个网段，即便我改了模块的IP，或者说用自己手机开热点，都无法连接到网络助手的服务器，也没找到解决办法，所以这里就看教程大概了解一下好啦。做完上面的前7个步骤，理论上我们就可以成功连接到服务器了：</p><img src="'+c+'" alt="image-20240109235245573" style="zoom:80%;"><p>连接上服务器后，就可以相互发数据了，如下图 ：</p><img src="'+n+'" alt="image-20240109235607278"><p>在透传模式中，若识别到单独的一包数据“ +++”，则退出透传模式。</p><img src="'+m+'" alt="image-20240109235704161" style="zoom:80%;"><p>注意：如果需要模块上电自动连接到某个 IP 并进入透传模式，这个时候需要在模块连接到路由器wifi热点之后，发送AT+SAVETRANSLINK=1,&quot;192.168.1.xxx&quot;,8086,&quot;TCP&quot;， 设置模块为上电自动连接到 TCP Server：192.168.1.xxx ， 8086 ， 并进入透传模式。当发送AT+SAVETRANSLINK 指令后，模块断电再上电会自动进入透传模式，此时发送 AT 指令模块是不会回复的（即使透传的服务器不存在，模块也会进入透传模式的）。模块要恢复到 AT 指令模式需要先退出透传模式，然后勾选发送新行，再发送“ AT+SAVETRANSLINK=0”，这样上电模块就不会再上电进入透传了。</p><h3 id="_3-多连接server" tabindex="-1">3. 多连接server <a class="header-anchor" href="#_3-多连接server" aria-label="Permalink to &quot;3. 多连接server&quot;">​</a></h3><h4 id="_3-1-配置wifi模块" tabindex="-1">3.1 配置WiFi模块 <a class="header-anchor" href="#_3-1-配置wifi模块" aria-label="Permalink to &quot;3.1 配置WiFi模块&quot;">​</a></h4><p>前 ATK_ESP8266 模块作为 server，需建立多连接，即可以连接多个 client以下为 ATK_ESP8266 作为 STA 模式建立 TCP SERVER 的设置</p><table tabindex="0"><thead><tr><th>步骤</th><th>命令</th><th>响应</th></tr></thead><tbody><tr><td>（1）设置 wifi 模式</td><td><code>AT+CWMODE=1</code> //设置模块为 STA 模式</td><td>OK</td></tr><tr><td>（2）重启生效</td><td><code>AT+RST</code></td><td>OK</td></tr><tr><td>（3）连接路由器</td><td><code>AT+CWJAP=”ALIENTEK”,”15902020353”</code> //连接对象路由器的 ssid 和 password</td><td>OK</td></tr><tr><td>（4）启动多链接</td><td><code>AT+CIPMUX=1 </code></td><td>OK</td></tr><tr><td>（5）建立 server</td><td><code>AT+CIPSERVER=1,8080</code> //设置端口号为 8080</td><td>OK</td></tr><tr><td>（6）获取模块 IP 地址</td><td><code>AT+CIFSR </code></td><td>OK <br>IP // IP地址<br>MAC // MAC地址</td></tr><tr><td>（7）电脑或者手机连接到 server，电脑或手机作为 client</td><td>无</td><td>无</td></tr><tr><td>（8）模块向指定通道发送数据</td><td><code>AT+CIPSEND=id,size</code><br>id：client 通道号<br>size：要发送的数据长度</td><td>OK<br>&gt;</td></tr><tr><td>（9）接收数据</td><td>+IPD,id,size: //id:收到数据的 client 通道号， size:接收到的数据长度</td><td>OK</td></tr></tbody></table><h4 id="_3-2-助手配置" tabindex="-1">3.2 助手配置 <a class="header-anchor" href="#_3-2-助手配置" aria-label="Permalink to &quot;3.2 助手配置&quot;">​</a></h4><img src="'+p+'" alt="image-20240111075135425" style="zoom:80%;"><h4 id="_3-3-实验效果" tabindex="-1">3.3 实验效果 <a class="header-anchor" href="#_3-3-实验效果" aria-label="Permalink to &quot;3.3 实验效果&quot;">​</a></h4><p>我们做第（7）步的时候，模块配置为 TCP Server ，客户端连接过来如下图所示：</p><img src="'+A+'" alt="image-20240111075222372" style="zoom:80%;"><p>第（9）步接收数据的时候如下图所示：</p><img src="'+T+'" alt="image-20240111075716960"><h3 id="_4-连接原子云" tabindex="-1">4. 连接原子云 <a class="header-anchor" href="#_4-连接原子云" aria-label="Permalink to &quot;4. 连接原子云&quot;">​</a></h3><p>原子云即原子云服务器，是正点原子推出的互联网云服务平台，它可以实现数据的远程监控、转发和管理等功能。原子云域名为： <a href="./[https://cloud.alientek.com/">cloud.alientek.com</a>，端口号为： 59666。</p><h4 id="_4-1-创建设备" tabindex="-1">4.1 创建设备 <a class="header-anchor" href="#_4-1-创建设备" aria-label="Permalink to &quot;4.1 创建设备&quot;">​</a></h4><p>在创建设备之前， 需登入原子云的网址<a href="https://cloud.alientek.com/" target="_blank" rel="noreferrer">原子云-用户登录 (alientek.com)</a> 创建并登入账号。创建和登入账号的过程比较简单， 这里不做过多介绍，登入原子云后，如下图所示：</p><img src="'+_+'" alt="image-20240112190444885"><p>建议第一次使用原子云的用户，点击原子云首页左下角的“帮助文档”，快速了解原子云服务器。在原子云平台创建设备，首先点击原子云首页左侧导航栏中的“设备管理”，随后在出现的页面中，点击“新增设备”，如下图所示：</p><img src="'+P+'" alt="image-20240112190511186"><p>接着在弹出的窗口中，根据 ATK-MW8266D 模块的设备类型选择“ESP8266”，随后根据个人喜好填入“设备名称”和“密码”（这里的密码在就是 ATK-MW8266D 模块通过 AT指令连接原子云时需要的密码），如下图所示：</p><img src="'+C+'" alt="image-20240112190526692" style="zoom:50%;"><p>最后，点击“新增”按钮， 即可创建设备，设备创建好后，如下图所示：</p><img src="'+S+`" alt="image-20240112190541015"><p>创建好设备后， 系统会自动为设备生成编号， 这个设备编号就是 ATK-MW8266D 模块使用 AT 指令连接原子云时需要的设备 ID。</p><h4 id="_4-2-连接到原子云" tabindex="-1">4.2 连接到原子云 <a class="header-anchor" href="#_4-2-连接到原子云" aria-label="Permalink to &quot;4.2 连接到原子云&quot;">​</a></h4><p>建好设备后，就能后根据设备的编号和密码并通过 AT 指令操作 ATK-MW8266D 模块连接原子云了。 具体的 AT 指令如下所示：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使能 ATK-MW8266D 模块的 STA 模式，以连接路由器的 AP</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AT+CWMODE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接路由器的 AP，以访问互联网</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AT+CWJAP</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=”ALIENTEK-YF”,”15902020353”</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 连接原子云服务器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AT+ATKCLDSTA</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=”63218710518682355498”,”12345678”</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>实际在串口调试助手中的操作，如下图所示：</p><img src="`+f+'" alt="image-20240112190715225"><p>当串口调试助手显示“CLOUD CONNECTED”后，说明已成功连接上原子云服务器，此时在原子云的设备管理界面，也能够看到对应的设备显示为“已连接”的连接状态，如下图所示：</p><img src="'+b+'" alt="image-20240112190733184"><p>当 ATK-MW8266D 模块成功连接原子云服务器后，即进入了透传模式，此时就能够在原子云的对应设备的“消息收发”操作界面通过原子云服务器发送消息至 ATK-MW8266D模块，同时，也能后在该界面下，查看到接收自 ATK-MW8266D 模块的消息，如下图所示：</p><img src="'+g+'" alt="image-20240112190852071">',104)])])}const K=e(u,[["render",I]]);export{q as __pageData,K as default};
